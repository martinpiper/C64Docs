<!doctype html public "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
    <title>C64 Programmer's Reference Guide: BASIC to Machine Language - Subroutines</title>
     <link rel="stylesheet" href="../default.css">
  <link rel="start" href="../../../index.html">
  <link rel="up" href="../index.html">
  <link rel="first" href="../front_cover.html">
  <link rel="contents" href="../page_iii.html">
  <link rel="chapter" title="Chapter 1 - BASIC Programming Rules" href="../Chapter_1/index.html">
  <link rel="chapter" title="Chapter 2 - BASIC Language Vocabulary" href="../Chapter_2/index.html">
  <link rel="chapter" title="Chapter 3 - Programming Graphics on the Commodore 64" href="../Chapter_3/index.html">
  <link rel="chapter" title="Chapter 4 - Programming Sound and Music on Your Commodore 64" href="../Chapter_4/index.html">
  <link rel="chapter" title="Chapter 5 - Basic to Machine Language" href="index.html">
  <link rel="chapter" title="Chapter 6 - Input/Output Guide" href="../Chapter_6/index.html">
  <link rel="appendix" title="Appendix F - Bibliography" href="../Appendices/page_388.html">
  <link rel="appendix" title="Appendix G - VIC Chip Register Map" href="../Appendices/page_391.html">
  <link rel="appendix" title="Appendix K - Error Messages" href="../Appendices/page_400.html">
  <link rel="appendix" title="Appendix P - Glossary" href="../Appendices/page_482.html">
  <link rel="glossary" href="../Appendices/page_482.html">
  <link rel="index" href="../page_483.html">
  <link rel="copyright" href="../page_ii.html">
  <link rel="last" href="../back_cover.html">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  

</head>
<body>
<a href="page_227.html"><img src="../../../../../images/blue_prev.gif" width="24" height="24" alt="[Prev]"></a> <a href="page_229.html"><img src="../../../../../images/blue_next.gif" width="24" height="24" alt="[Next]"></a> <a href="../page_iii.html"><img src="../../../../../images/blue_toc.gif" width="24" height="24" alt="[Contents]"></a>
<a href="../../../index.html"><img src="../../../../../images/blue_cbm.gif" alt="[Commodore]" width="22" height="24"></a> <a href="https://www.devili.iki.fi/general/new.html" title="New"><img src="../../../../../images/blue_new.gif" alt="[New]" height="24" width="27"></a>
<a href="https://www.devili.iki.fi/search/" title="Search"><img src="../../../../../images/blue_search.gif" alt="[Search]" height="24" width="24"></a>
<a href="https://www.devili.iki.fi/" title="Home"><img src="../../../../../images/blue_home.gif" alt="[Home]" width=24 height=24></a>
<br>
<hr>


<h3><a name="Subroutines">SUBROUTINES</a></h3>

<p> In machine language (in the same way as using BASIC), you can call
 subroutines. The instruction to call a subroutine is JSR (Jump to Sub-
 Routine), followed by the specified absolute address.

<p> Incorporated in the operating system, there is a machine language
 subroutine that will PRINT a character to the screen. The CBM ASCII code
 of the character should be in the accumulator before calling the
 subroutine. The address of this subroutine is $FFD2.

<p> Therefore, to print "Hi" to the screen, the following program should be
 entered:

<pre>
   .A 1400 LDA #$48     - load the CBM ASCII code of "H"
   .A 1402 JSR $FFD2    -  print it
   .A 1405 LDA #$49     - load the CBM ASCII code of "I"
   .A 1407 JSR $FFD2    -  print that too
   .A 140A LDA #$0D     - print a carriage return as well
   .A 140C JSR $FFD2
   .A 140F BRK          - return to 64MON
   .G 1400              - will print "HI" and return to 64MON
</pre>

<p> The "PRINT a character" routine we have just used is part of the KERNAL
 jump table. The instruction similar to GOTO in BASIC is JMP, which means
 JUMP to the specified absolute address. The KERNAL is a long list of
 "standardized" subroutines that control ALL input and output of the
 Commodore 64. Each entry in the KERNAL JMPs to a subroutine in the
 operating system. This "jump table" is found between memory locations
 $FF84 to $FFF5 in the operating system. A full explanation of the KERNAL
 is available in the "KERNAL Reference Section" of this manual. However,
 certain routines are used here to show how easy and effective the KERNAL
 is.

<p> Let's now use the new principles you've just learned in another pro-
 gram. It will help you to put the instructions into context:

<hr>
<a href="page_227.html"><img src="../../../../../images/blue_prev.gif" width="24" height="24" alt="[Prev]"></a> <a href="page_229.html"><img src="../../../../../images/blue_next.gif" width="24" height="24" alt="[Next]"></a> <a href="../page_iii.html"><img src="../../../../../images/blue_toc.gif" width="24" height="24" alt="[Contents]"></a>
<a href="../../../index.html"><img src="../../../../../images/blue_cbm.gif" alt="[Commodore]" width="22" height="24"></a> <a href="https://www.devili.iki.fi/general/new.html" title="New"><img src="../../../../../images/blue_new.gif" alt="[New]" height="24" width="27"></a>
<a href="https://www.devili.iki.fi/search/" title="Search"><img src="../../../../../images/blue_search.gif" alt="[Search]" height="24" width="24"></a>
<a href="https://www.devili.iki.fi/" title="Home"><img src="../../../../../images/blue_home.gif" alt="[Home]" width=24 height=24></a>
<br>
<table cellspacing="0" border="0" width="100%">
<tr><td align="right" colspan="2"><small>
	This page has been created by <a href="mailto:rtiainen@suespammers.org">
	Sami Rautiainen</a>.
</small></td></tr><tr><td align="left"><small>
	Read the <a href="https://www.devili.iki.fi/general/copyright.html">small print</a>.
</small></td><td align="right"><small>
	Last updated 
	July 10, 2002.
</small></td></tr>
</table>


</body>
</html>
