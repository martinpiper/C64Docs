<!doctype html public "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
    <title>C64 Programmer's Reference Manual: BASIC to Machine Language - Using Machine Language from BASIC</title>
     <link rel="stylesheet" href="../default.css">
  <link rel="start" href="../../../index.html">
  <link rel="up" href="../index.html">
  <link rel="first" href="../front_cover.html">
  <link rel="contents" href="../page_iii.html">
  <link rel="chapter" title="Chapter 1 - BASIC Programming Rules" href="../Chapter_1/index.html">
  <link rel="chapter" title="Chapter 2 - BASIC Language Vocabulary" href="../Chapter_2/index.html">
  <link rel="chapter" title="Chapter 3 - Programming Graphics on the Commodore 64" href="../Chapter_3/index.html">
  <link rel="chapter" title="Chapter 4 - Programming Sound and Music on Your Commodore 64" href="../Chapter_4/index.html">
  <link rel="chapter" title="Chapter 5 - Basic to Machine Language" href="index.html">
  <link rel="chapter" title="Chapter 6 - Input/Output Guide" href="../Chapter_6/index.html">
  <link rel="appendix" title="Appendix F - Bibliography" href="../Appendices/page_388.html">
  <link rel="appendix" title="Appendix G - VIC Chip Register Map" href="../Appendices/page_391.html">
  <link rel="appendix" title="Appendix K - Error Messages" href="../Appendices/page_400.html">
  <link rel="appendix" title="Appendix P - Glossary" href="../Appendices/page_482.html">
  <link rel="glossary" href="../Appendices/page_482.html">
  <link rel="index" href="../page_483.html">
  <link rel="copyright" href="../page_ii.html">
  <link rel="last" href="../back_cover.html">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  

</head>
<body>
<a href="page_308.html"><img src="../../../../../images/blue_prev.gif" width="24" height="24" alt="[Prev]"></a> <a href="page_310.html"><img src="../../../../../images/blue_next.gif" width="24" height="24" alt="[Next]"></a> <a href="../page_iii.html"><img src="../../../../../images/blue_toc.gif" width="24" height="24" alt="[Contents]"></a>
<a href="../../../index.html"><img src="../../../../../images/blue_cbm.gif" alt="[Commodore]" width="22" height="24"></a> <a href="https://www.devili.iki.fi/general/new.html" title="New"><img src="../../../../../images/blue_new.gif" alt="[New]" height="24" width="27"></a>
<a href="https://www.devili.iki.fi/search/" title="Search"><img src="../../../../../images/blue_search.gif" alt="[Search]" height="24" width="24"></a>
<a href="https://www.devili.iki.fi/" title="Home"><img src="../../../../../images/blue_home.gif" alt="[Home]" width=24 height=24></a>
<br>
<hr>


<h3><a name="Where">WHERE TO PUT MACHINE LANGUAGE ROUTINES</a></h3>

<p>The best place for machine language routines on the Commodore 64 is
 from $C000-$CFFF, assuming the routines are smaller than 4K bytes long.
 This section of memory is not disturbed by BASIC.
<p>If for some reason it's not possible or desirable to put the machine
 language routine at $C000, for instance if the routine is larger than 4K
 bytes, it then becomes necessary to reserve an area at the top of memory
 from BASIC for the routine. The top of memory is normally $9FFF. The top
 of memory can be changed through the KERNAL routine <b>MEMTOP</b>, or by the
 following BASIC statements:
<pre>
   10 POKE51,L:POKE52,H:POKE55,1:POKE56,H:CLR
</pre>
 Where H and L are the high and low portions, respectively, of the new
 top of memory. For example, to reserve the area from $9000 to $9FFF for
 machine language, use the following:
<pre>
   10 POKE5110:POKE52,144:POKE5510:POKE56,144:CLR
</pre>

<h3><a name="How">HOW TO ENTER MACHINE LANGUAGE</a></h3>

<p> There are 3 common methods to add the machine language programs to a
 BASIC program. They are:

<h4>1) DATA STATEMENTS:</h4>

<p> By READing DATA statements, and POKEing the values into memory at the
 start of the program, machine language routines can be added. This is the
 easiest method. No special methods are needed to save the two parts of
 the program, and it is fairly easy to debug. The drawbacks include taking
 up more memory space, and the wait while the program is POKEd in.
 Therefore, this method is better for smaller routines.

<b class=blue>EXAMPLE:</b>
<pre>
 10 RESTORE:FORX=1T09:READA:POKE12*4096+X,A:NEXT
 .
 .
 .
 BASIC PROGRAM
 .
 .
 .
 1000 DATA 161,1,204,204,204,204,204,204,96
</pre>
<hr>
<a href="page_308.html"><img src="../../../../../images/blue_prev.gif" width="24" height="24" alt="[Prev]"></a> <a href="page_310.html"><img src="../../../../../images/blue_next.gif" width="24" height="24" alt="[Next]"></a> <a href="../page_iii.html"><img src="../../../../../images/blue_toc.gif" width="24" height="24" alt="[Contents]"></a>
<a href="../../../index.html"><img src="../../../../../images/blue_cbm.gif" alt="[Commodore]" width="22" height="24"></a> <a href="https://www.devili.iki.fi/general/new.html" title="New"><img src="../../../../../images/blue_new.gif" alt="[New]" height="24" width="27"></a>
<a href="https://www.devili.iki.fi/search/" title="Search"><img src="../../../../../images/blue_search.gif" alt="[Search]" height="24" width="24"></a>
<a href="https://www.devili.iki.fi/" title="Home"><img src="../../../../../images/blue_home.gif" alt="[Home]" width=24 height=24></a>
<br>
<table cellspacing="0" border="0" width="100%">
<tr><td align="right" colspan="2"><small>
	This page has been created by <a href="mailto:rtiainen@suespammers.org">
	Sami Rautiainen</a>.
</small></td></tr><tr><td align="left"><small>
	Read the <a href="https://www.devili.iki.fi/general/copyright.html">small print</a>.
</small></td><td align="right"><small>
	Last updated 
	December 17, 2002.
</small></td></tr>
</table>


</body>
</html>
